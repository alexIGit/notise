==== Репозитории ========================

sudo gedit 		/etc/apt/sources.list
sudo add-apt-repository ppa:otto-kesselgulasch/gim	- 
ls /etc/apt/sources.list.d/|grep -v 'save'		- вывод подключенных репозиториев
apt-cache show foobnix					- проверить наличие программы в репозиториях
sudo add-apt-repository -r ppa:otto-kesselgulasch/gimp 	- удаление
sudo find /etc/apt/sources.list.d -type f -empty -exec rm {} \;	- удалений пустых файлов из хранилища


=========================================

 whatis 		- Показывает описание команды, правда на английском языке.

 &&			- Символ объединения команд.
			  Причем последующая команда выполнится лишь при условии успешного
				 выполнения предыдущей команды.
 stat имя		- Позволяет посмотреть информацию о файле/каталоге. 
 

==== Работа с архивами 

 zip 			- Команда для архивации в архив zip, сжатия файлов.
			  zip имя_архива.zip файл_для_архивации
			  ~$ zip test2015.zip list.txt
 zip -r dir.zip /dir	- для папок
 zip -[0-9]		- Архивация со сжатием архива. 
			  Где 0 — это без сжатия, 9 — максимальное сжатие.
			  ~$ zip -9 test2015.zip list.txt
 zip -e 		- Архивация с установкой пароля на архив.
			  ~$ zip -9 -e test2015.zip list.txt
 unzip 			- Разархивирование файлов. 
			  ~$ unzip test2015.zip
 unzip -l 		- Просмотр содержимого архива.
			  ~$ unzip -l test2015.zip
 unzip -t 		- Проверка архива на ошибки. 
			  ~$ unzip -t test2015.zip
 gzip			-| Команда для архивации в архив gzip/bzip2, сжатия файлов.
 bzip2			 | Команда записывается в таком виде: gzip файл_для_архивации
			 Необходимо учесть. Что при архивации в форматы gzip/bzip2 
			 исходный файл (в примере list.txt) удаляется.
			 ~$ bzip2 -9 list.txt
 gunzip			-| Разархивирование файлов, сжатых в архив gzip/bzip2.
 bunzip2     		-| Необходимо учесть.  Что при разархивации архива gzip/bzip2 
			  исходный архив (в примере test2015.gz) удаляется.
			  ~$ bunzip2 test2015.bz
 --- tar
 tar -zcf		- Команда для архивации в архив tar и сжатия методом gzip.

	-с	- создание резервных архивов 
	-х	- извлечения файлов из архива
	-d	- выявление различий между архивами 
	-u	- обновление файлов в архиве
 	-r (-А) - добавлять файлы в существующие архивы 
 	-d	- удалять файлы из них 
	-t	- отображать содержимое архива
	-j	- для сжатия архива в формат bzip2
	-z 	- для сжатия в формат gzip
	-v 	- позволяет отображать более подробную информацию о процессе сжатия
	-f 	- определяет имя будуще­го архива (стоит перед именем)

 tar -zcf имя_архива.tar.gz файл_для_архивации
 tar -zcf list.tar.gz list.txt

 tar czf  myfiles.tar.gz *.txt	- Из ТХТ-файлов создает файл tar, сжатый с помощью gzip
 tar czvf myfiles.tar.gz *.txt	- При создании архива отображает более подробную информацию
 tar cjvf myfiles.tar.bz2 *.txt	- Создает архив и сжимает его с помощью bzip2
 tar -zxf list.tar.gz 		- Разархивирование архивов tar,сжатых методом gzip. 

 tar tvf  myfiles.tar		- Отображает список вложенных в ТАR-архив файлов
 tar tzvf myfiles.tgz		- Отображает файлы архива gzip

 tar --use-compress-program=lzop -tf myfiles.tar.lzo	- Отображает содержимое архива LZO

 tar -Af archive1.tar archive2.tar	- Для объединения одного файла tar с другим 
 tar rvf archive.tar mуfilе 		- Добавляет файл в архив tar
 tar rvf archive.tar *.txt		- Добавляет несколько файлов в архив tar

 tar --delete file1.txt -f myfile.tar	- Удаляет file1.txt из myfile.tar



 ---- rar 
 http://help.ubuntu.ru/wiki/7zip

 7z x архив.rar

 ---- lzop (высокая скорость сжатия и маленькая компрессия)

 lzop -v myfile		- Сохраняет myfile и создает сжатый myfile.lzo


==== Работа с оболочкой
 history
 !! 			- Выполнение последней набранной команды 

 alias 			- Показывает уже созданные в системе псевдонимы команд.
 alias псевдоним='команда' - Позволяет назначить псевдоним команде. 

==== Контроль за ресурсами системы

 dpkg -i		- Установка пакетов с расширением .deb. 
			  ~$ sudo dpkg -i opera-stable.deb
 dpkg -r 		- Удаление пакета из системы. :~$ sudo dpkg -r opera-stable.deb
 dpkg --configure -a	- Программа для настройки пакетов. 

 apt-mark hold пакет	- Команда, которая устанавливает запрет на обновление пакета.
			  Обратная команда unhold снимает данный запрет.
 apt-get remove пакет	- Удаление пакетов без удаления файлов настроек. 
 apt-get purge пакет 	- Удаление пакетов c удалением файлов настроек.

 apt-get upgrade 	- Обновление всех пакетов в системе. 
 apt-get dist-upgrade	- Обновление всех пакетов в системе, а также ядра Linux и др.

 apt-cache show пакет	- Показывает информацию о пакете, его версии, зависимостях, описание.

 apt-get autoremove	- Команда используется для автоматического удаления пакетов, 
			  которые были установлены как зависимости других,
			  но сейчас они больше не нужны. 
 apt-get autoclean	- Команда удаляет все .deb-файлы из /var/cache/apt/archives
			  для освобождения свободного места на жестком диске.
 apt-get install -f	- Команда для установки зависимостей. 

sudo apt-get -d install <name>	- Загружает nрограммный nакет и nомещает его в nanкy
				  /var/cache/apt/archives 

sudo apt-get clean 	- Удаляет из nаnки /var/cache/apt/archives все кэшираванные nакеты для
			  освобождения места на диске 
sudo apt-get --purge remove <name> - Удаляет указанный nакет и все конфигурационные файлы. 
				     Для сохранения конфигурационных файлов удалите из команды 
				     ключевое слово --purge 
apt-cache stats 	- Выводит статистику по всем установленным пакетам 
apt-cache depends 	- Выводит взаимозависимости программнога пакета (установленного или нет)
apt-cache pkgпames 	- Выводит список всех установленных пакетов 


sudo gedit /etc/apt/sources.list
wget https://dl-ssl.google.com/linux/linux_signing_key.pub -0 /tmp/key.pub 
==== Работа с сетью
 ifconfig 		- Показывает информацию о всех сетевых устройствах. slava:~$ ifconfig
 host			- Показывает ip-адрес по его домену и наоборот. 
			  ~$ host www.google.com
 iwconfig 		- Показывает информацию о беспроводных устройствах. slava:~$ iwconfig
 netstat -rn		- Показывает таблицу маршрутизации. slava@slava:~$ netstat -rn


==== Разные команды
 
 arch 			- Показывает архитектуру компьютера.
 
 clear 			- Очистка экрана в Терминале. slava@slava:~$ clear

 lame ИЗ В		- Перекодирует аудиофайлы в формат mp3. 
			  Указав аргумент -b можно задать уровень битрейда в диапазоне 
			  32 40 48 56 64 80 96 112 128 160 192 224 256 320.
			  ~$ lame -b 256 AM.wav NewAM.mp3
 avconv			- Перекодирует видеофайлы в другие форматы.
			  ~$ avconv -i ~/Video.flv ~/audio.mp3
 uptime			- Показывает сколько времени работает система с момента перезагрузки,
			  сколько пользователей.
 eject 			- Открытие CD/DVD привода. slava@slava:~$ eject
 gpg -с 		- Команда для шифрования файлов. 
			  ~$ gpg -c Video.flv
			  Для расшифровки файла необходимо ввести команду gpg без аргументов. 				  gpg Video.flv.gpg

 last reboot 		- Показывает историю перезагрузок системы. 
 lsb_release -a 	- Показывает версию и кодовое имя Ubuntu. slava@slava:~$ lsb_release -a

 nano файл 
 xrandr 		- Показывает доступные разрешения монитора.
 Программа --version	- Показывает версию установленной программы, пакета.
 man команда		

 ---- наблюдение за командами

 watch 'ls -sh файл'	- Команда которая каждые две секунды обновляет информацию о размере файла
 tail -F файл		- Слежка за файлом и его изменениями. 
 sudo tail -f /var/1og/messages

 watch ' cat /proc/1oadavg'	- следить за средней загрузкой, Каждые две секунды watch 
 watch -n 10 '1s -l' 		- каждые 10 сек
 watch -d '1s -1' 		- разницу между обновлениями 

 watch '1s -l mydown1oad.iso'  	- следить за размером файла



==========================================
----		Немет [72]
 < 	- связывает канал STDIN с содежимым некоторого существующего файла
 >	| - перенапрявляют поток STDOUT - для замены содержимого
 >>	|				- для добавления данных в его конец
 
 >&	- перенаправляет потоки STDOUT и STDERR 
 2>	- перенаправляет потоки STDERR 
	  find / -name core 2> /dev/null

------------

 |	 - связать канал STDOUT с STDIN
 
 &&	- последующая команда выполняется только в случае успешного выполнения предыдущей
 ||	- обеспечит выполнение следующей команды в том случае, если предыдущая команда не выполнится

---- переменные ----	[73]
 etcdir='/etc'		- присваивание
 echo $etcdir		| -
 echo ${etcdir}		|

export	имя_перем	- чтобы перевести переменную оболочки в ранг переменной среды(~/.profile or ~/.bash_profile)

export PATH=addValue:$PATH

unset -> обратная export
---------------

---- Команды общих фильтров ------[74]

 uniq		- вывод уникальных строк
	-с - для подсчета количества экземпляров каждой строки
	-d - для отображения только строк, не имеющих дубликаты
	cut -d: -f7 /etc/passwd | sort | uniq -c

	


 tee		- копирование входного потока в два места
-----------------
---- bash ----
 #!/bin/bash

 chmod +x hello 
 
 ./hello
 bash hello
 source hello

 sleep 5

 --- Функции и аргументы командной строки
 $0 - имя, по которому был вызван сценарий
      ./bin/example.sh
 $1 - первый аргумент и т.д
 $# - количество переданных аргументов командной строки
 $* - все эти аргументы
 ---------------------------------------

 --- операторы сравнения 
 =	-eq	
 !=	-ne
 <	-lt
 <=	-le
 >	-gt
 >=	-ge
 -n		- не равно значению null
 -z		- равно значению null
 -------------------
 --- операторы оценки свойств файлов 
 -d файл	 - Файл "файл" существует и является каталогом
 -e файл	 - Файл "файл" существует
 -f файл	 - Файл "файл" существует и является обычным
 -r файл 	 - У вас есть право доступа на чтение файла
 -s файл	 - Файл "файл" существует и он не пустой
 -w файл	 - У вас есть право доступа для записи в файл
 файл1 -nt файл2 - Файл "файл1" новее, чем "файл2"
 файл1 -op файл2 - Файл "файл1" старше, чем "файл2"

 -----------
 ---- Операторы для тестирования
 -а file	- Проверяет наличие файла (то же, что -е)
 -b file	- Контролирует, какой файл является специальным блочным устройством
 -c file	- Проверяет, какой файл является специальным файлом устройства
 		  (например, устройства последовательной передачи данных)
 -d file	- Контролирует, какой файл я вляется каталогом
 -е file	- Проверяет наличие файла (то же, что -а)
 -f file	- Проверяет наличие файла и является ли он обычным 
		  (например, не является каталогом, сокетом, каналом, ссылкой 
		  или файлом устройства)
 -g file	- Обследует, какой файл обладает множеством битов set-group-id
		  (назначение идентификатора группы)
 -h file	- Проверяет, какой файл имеет символьную ссылку (то же, что  -L)
 -L file	- Проверяет, какой файл имеет символ ьную ссылку (то же, что -h)
 -k file	- Контролирует, у какого файла есть бит закрепления в памяти
 -n striпg	- Проверяет, длина какой строки превышает О байт
 -O file	- Контролирует, каким файлом вы владеете
 -р file	- Проверяет, какой файл является именованным каналом
 -r file	- Обследует, какой файл доступен вам для чтения
 -s file	- Проверяет, существует л и файл и превы шает ли его размер О байт
 -S file	- Контролирует, существует ли файл и является ли он сокетом
 -t fd		- Проверяет, подключен ли дескриптор файла к терминалу
 -u file	- Поверяет, какой файл обладает множеством битов set-user-id 
		  (установка идентификатора пользователя)
 -w file	- Обследует, какой файл является перезаписываемым
 -х file	- Проверяет, какой файл является выполняемым
 -z string	- Контролирует, длина какой строки равна О байт

 expr1 -а	- Проверяет, яляются ли справедливыми и первое, и второе 
 expr2		  выражения

 expr1 -о	- Проверяет, является ли справедливым одно из двух выражений
 expr2

 file1 -nt file2 - Контролирует, является ли первый файл более новым по отношению
		   ко второму (используется метка времени созда ния/модификации
		   файла)
 file1 -ot file2 - Проверяет, является ли первый файл более старым по отношению ко
		   второму (используется метка времени создания/модификации файла)
 file1 -ef file2 - Обследует, какой из двух файлов прикреплен к ссылке 
		   (жесткая ссылка или символьная)
 var1 = var2	- Проверяет, равна ли первая переменная второй
 var1 -eq var2	- Контролирует, равна ли первая переменная второй
 var1 -ge va r2	- Поверяет, больше ли первая переменная второй или они равны
 var1 -gt var2	- Контролирует, больше ли первая переменная второй
 var1 -le var2	- Поверяет, меньше ли первая переменная второй или они равны
 var1 -lt va r2	- Обследует, меньше ли первая переменная второй

 var1 != var2	- Проверяет неравенство первой и второй переменных
 var1 -nе va r2

 ---------------
  --- оператор if
 if [ -n "$user_name" ]; then
     echo "Привет $user_name!"
     exit 0
 else 
     echo "Вы не задали свое имя!"
     exit 1
 fi
 -------------------------
 --- оператор case
 function logMsg {
	message_level=$1
	message_itself=$2
	if [ $message_level -le $LOG_LEVEL ]; then
		case $message_level in
			0) message_level_text="Error";;
			1) message_level_text="Warning";;
			2) message_level_text="Info";;
			3) message_level_text="Debug";;
			*) message_level_text="Other"
		esac
		echo "${message_level_text}: $message_itself"
	fi
 }
 ----
 case "$VAR" in
	string1)
		{ action1 } ; ; 
	string2)
		{ action2 } ; ;
	*)
		{ default action } ; ;
 esac


 -----------------------------------
 ---  for in
 #!/bin/bash

 suffix=BACKUP--`date +%Y%m%d-%H%M`

 for script in *.sh; do
	newname="$script.$suffix"
	echo "Copying $script to $newname..."
	cp $script $newname
 done

 или

 for (( i=0 ; i < $CPU_COUNT ; i++ )); do
	CPU_LIST="$CPU_LIST $i"
 done
 -----------------------
 --- while
 #!/bin/bash

 exec 0<$1
 counter=1
 while read line; do
	echo "$counter: $line"
	$((counter++))
 done
 --------------------------


==== Работа с файлами =============================================================================
 file имя 		- Показывает тип файла/директории.
 
 
 mkdir 			- Создание нового каталога 
			 ~$ mkdir ~/test/test3
 mkdir -р /tmp/a/Ь/new	- Создает по мере необходимости каталог нижнего уровня для new
 mkdir -m 700 /tmp/new	- Создает каталог new с правани доступа drwx---

 touch hello.html	- Создание нового файла
 > newfi1e.txt		- Создает пустой файл

 
 
 -----------------------
 cp -l			- Создание жесткой ссылки на файл/каталог.
			  изменяя содержимое жесткой ссылки изменяется содержимое файла источника.
			  удалив файл источник (list.txt) Вы всеравно сможете продолжить работать с
				содержимым жесткой ссылки. 
			 ~$ cp -l list.txt list3.txt
 cp -s 			- Создание символической ссылки на файл/каталог.
    -v 			– подробный вывод
    -r 			– копировать каталоги рекурсивно
    -p 			– сохранять разрешения
 
 ln new.txt new-hardlink 	- создание жесткой ссылки 
				  тот же номер inode, что и у new.txt
 ln -s new.txt new-symlink	- создание символьной ссылки

 ==== Файлы устройств (драйвера)
 /dev
	блочные (например, хранилища)
	идентификаторы накопителя (например, последовательные порты и конечные устройства).

 mknod		- создать собственный файл устройства
	sudo mknod /dev/ttyS4 с 4 68	- Добавляет устройство для пятого серийного порта

 ==== Типы файлов
 d	- каталог
 -	- файл
 с	- идентификатор накопителя
 b	- блочные устройства
 l	- символьные ссылки
 p 	- именованные каналы
 s 	- сокеты

 ==== Права доступа
  chmod			- Команда управления правами доступа к файлам и каталогам.
			  В примере мы удалили права доступа к директории ~/test для 
				всех пользователей группы.
			:~$ sudo chmod g-rwx ~/test
 chmod u+x myscript.sh	- сделать файл исполняемым

     ------------------------
 sudo chmod -R 700 /tmp/test		Предоставляет полные права доступа только к содержимому
					каталога /tmp/test
 sudo chmod -R 000 /tmp/test  		Снимает все права доступа к содержинону каталога /tmp/test
 sudo chmod -R a+rwx /tmp/test 	Предоставляет полные права доступа ко всему
					содержинону каталога /tmp/test
 -R включается в указанный вами каталог. Таким образом, вышеуказанные права доступа, например,
 заменятся на права доступа к каталогу /tmp/test, а не только к файлам и каталогам, содержащимся  
 в нем.

 ---- Права собственности
 chown chris test/ 		Изменяет владельца на chris
 chown chris:market test/ 	Изменяет владельца на chris, а группу на market

 chgrp market test/ 		Изменяет группу на market
 chown -R chris test/ 		Изменяет владельца всех вложенных файлов и каталогов 
				папки test/ на chris

 ==== Навигация в файловой системе
 cd /путь		- Переход в указанный каталог.
 cd - 			- Переход к предыдущему каталогу

 cd 			-| Переходит в ваш основной каталог
 cd $НОНЕ		 |
 cd ~			 |
 cd ~francois 		- Переходит в основной каталог пользователя francois
 cd . 			-| Переходит в предыдущий рабочий каталог
 cd $0LDPWD		 |
 cd ~/puЬlic_html 	- Переходит к puЬlic_html в вашем основнон каталоге
 cd .. 			- Переходит в корень рабочего ка талога
 cd /usr/bin 		- Переходит в каталогу usr/bin из корневого каталога
 cd usr/bin 		- Переходит ко вложенной папке usr/bin рабочего каталога

 pwd 			- Показывает текущий каталог

 Bash может запоминать и хранить список рабочих каталогов. 
 pushd			добавление
 popd			удаление каталогов из этого списка

 dirs
 dirs -v

 pushd 			– сменить директорию (предыдущая сохранится в стек)
 popd 			– самнить директорию на верхнюю из стека
 dirs 			– показать стек директорий
 ==== Копирование, перемещение и удаление файловf
 cp			- Команда копирования. 
			  cp объект куда_копировать
			 ~$ cp ~/test/music.mp3 ~/test/test3
 cp -r			- Копирование каталогов.
 cр -а /tmp/html /mp/back/	- копирует все файлы из каталога /tmp/html,
				  сохраняя все настройки прав собственности и доступа
 cр -R /tmp/html /tmp/back/	- осуществляет рекурсивное копирование структуры каталога и назначает 
				  в качестве владельца каталога текущего пользователя,
				  изменяя текущие отметки даты и времени

 dd			- Команда создания образов дисков и флешек и др.
			  Имеет следующую запись: dd if=источник of=образ
			  В примере создается образ флешки.
			  ~$ sudo dd if=/dev/sdb1 of=~/ubuntu.iso
 dd if=/dev/zero of=/tmp/mynullfile count=1	- копирование данных



 mv			- Команда перемещения файлов.
			  Может также переименовывать файлы/каталоги при перемещении.

 rm 			- Команда удаления файлов.
 rm * 			- Удаление группы файлов.
			 ~$ rm *.avi
 rm -i 			- Удаление файлов с запросом на подтверждение их удалить
 rm -rf 		- Удаление каталогов.
 
 ==== Изменение атрибутов файла
 Атрибуты:
 а -только добавле­ние	 	с -сжатый		d -без дампа
 I -постоянный			j -регистрация данных	s - безопасное удаление
 t -запрет слияния в конце файла			u -неудаляемый
 А -без обновления atime 				D -синхронные обновления каталогов
 S -синхронные обновления				Т -верхушка дерева каталогов

  
 lsattr /etc/host*	- Показывает атрибуты файла. 
 lsattr -aR /tmp/ 	- Рекурсивно отображает все атрибуты каталога /tmp

 chattr 		- Команда изменения атрибутов файлов и каталогов. 
			  +i - добавление атрибута 
			  -i - удаление атрибута
			 
			  i - "неизменяемый", в результате чего файл/каталог нельзя будет
				 переименовать и удалить
			  a - "добавляемый", что означает,что в папку можно добавлять файлы
				 но удалять нельзя.
 			  sudo chattr +i whatever.iso
			  sudo chattr -i whatever.iso

 ==== Поиск файлов
 locate имя 		- Команда locate показывает место расположение указанного файла и каталогов.
		  	  необходимо обновить базу данных locate командой updatedb
 locate -i itco_wdt	- не чуствителен к регистру
 sudo updatedb		- обновление базы
 -----------------------
 
 find -name 'шаблон' 	- Поиск файлов/каталогов по имени.
 find / -name "e1OO*" -print
 find / -name e1OO -print 2> /dev/nu11	-  исключить из поиска недоступные ка­талоги

 find -name '*имя*' 	- Поиск файлов/каталогов по части имени. 
 find -size N   	- Поиск файлов/каталогов по их размеру. 
			  ~$ find -size 3M	(+2G)
 find -type		- Поиск по типу данных.
			  d — каталог, f — файл. 
			  ~$ sudo find ~/ -type d -name 'test'
 find -fprint		- Вывод результатов поиска в файл. 
			  ~$ sudo find ~/ -type f -name 'test*' -fprint ~/poisk.txt
 -- по временным меткам
 find /usr/bin/ -amin -2  	- к которым обращались в последние две минуты
 find /home/ine/ -atime +60 	- к которым не обра­щались более 60 дней
 -- 
 find /sbin/ -perm 750	- файлы с правами доступа, соответ­ствующими 750

 find /var -user francois -ехес ls -l {} \;	все файлы, владельцем которых является francois
						(должен быть зарегистрированным пользователем), и
						 выполняет для каждого из них команду ls -l
 find /var -user francois - print | xargs ls -l	альтернатива exec


 Чтобы инвертировать критерий поиска, поставьте перед этим критерием вос­клицательный знак (!)

 ------------------------
 whereis		- Показывает адрес расположения файлов указанной программы. 
			~$ whereis firefox
 which ls
 ------------------------

 ==== Отображение спис ка файлов
 ls			- Показывает список файлов и подкаталогов в текущем
 ls -m			- 	разделенных запятыми
 ls -a			- 	т.ч. скрытых
 ls /videos/*.avi	-  	все файлы с заданным разрешением (в данном случае .avi). 
			 ~$ ls ~/*.zip
			 /home/slava/all.zip /home/slava/test.zip
 ls /music/*имя*	- 	все файлы в названии которых встречается заданный порядок букв,
				заключенных между знаками *полное название файла или его часть*
			 ~$ ls ~/*te*
			 /home/slava/test.zip
 ls -R /путь		- Показывает содержимое указанного каталога, а также всех его подкаталогов
 ls -1 			- 	в 1 столбик
 ls -l			- права доступа, дату модификации файлов 
 ls -t			-	сортируя файлы и каталоги по дате создания.
 ls -s			-	сортируя файлы и каталоги по размеру.
 ls -r			- 	в обратном порядке.
 ls -h			- 	в килобайтах, меrабайтах и rиraбайтах
			 ~$ ls -1 -s -r -h ~/test/test2
 ls -li 		- Параметр -li отображает номера inode, сопоставляемые с каждым файлом
 ls -lS			- + сортирует по размеру

 ls -lа			- начинающиеся с точки (.)
 ls -lt			- Сортирует файлы по времени последнего изменения
 ls -lu			- Сортирует файлы по времени последнего открытия
 ls -li			- Отображает список номеров inode,связанных с каждым файлом
 ls -ln			- Отображает вместо имен числовые идентификаторы пользователя/группы
 ls -lh			- Отображает размеры файлов в удобной для чтения форме (Кбайт. Мбайт)
 ls -lR			- Рекурсивно отображает файлы из рабочего каталога и его подкаталогов

 ls -F			- Добавляет символ для определения типа файла
 ls --color=always	- Выделяет типы файлов различными цветами
 ls -С			- Отображает файлы в столбцах

 ==== Проверка файлов
 md5sum файл 		- Показывает хеш-сумму файла. slava@slava:~$ md5sum test.zip
 sha1sum файл 		- Показывает хеш-сумму файла по алгоритму SHA-1.
==================================================================================
==== Обработка текстовой информации ====================================================================

 > 			- Оператор вывода информации о результатах выполнения команды в файл. 
			 ~$ ls ~/test > ~/list.txt
 >>			- 	В отличии от предыдущего, >> информацию будет дозаписывать


 cat 			- Вывод на экран информации из файла.
 cat -n			- 	с нумерацией строк.
 cat -s myfile.txt	- Отображает последовательные пустые строки как одну
 cat -Ь myfile.txt	- Отображает нонера только для заполненных строк
 cat myfile.txt > copy.txt	 	- Отправляет содержимое файла в другой файл
 cat myfile.txt >> myotherfile.txt 	- Прикрепляет содержимое файла к другому файлу
 
 head -n 50 myfile.txt	-| Отображает первые 50 строк файла
 head -n 50 myfile.txt	 |
 ps auwx | head -n 15	- Выводит первые 15 строк выхода команды ps

 tail 			- аналогично head только с конца
 tail -f /log/messages	- непрерывный просмотр конца файла (в режиме реаль ного времени)

 less файл		- Постраничный вывод информации из файлов с большим объемом текста.
	"/"		- для поиска слова

 pr			- разбивать текст на части, добавляя в заголовок каждой страницы текущую дату,
			  время, имя файла и номер страницы
 pr --column=2 		- Разбивает список программных пакетов на два с толбца


 | lpr			- Направляет выход команды на принтер

 ---- Поиск в тексте
 grep 			- Команда поиска в текстовых файлах.
			  grep 'фраза_поиска' где_искать
			  :~$ grep 'знала' ~/*.txt
	-с - количество совпавший строк
	-i - игнорирование регистра
	-v - для вывода отличающихся строк
	-l - выводить только имена файлов, совпавшие с шаблоном строки
	-R - поиск слова или фразы во всех подкаталогах указанной директории
	-w — позволяет сократить результаты поиска сделав их более точными.
	-h - отключить вывод имен файлов

 -n 	- показывает номера строк в результате
	 sudo grep -l mdadm /var/log/*

 ls | grep		- Позволяет сузить результаты команды ls с помощью заданных grep критериев. 
			  ~$ ls -1 | grep test
 ls | grep -v		- Позволяет наоборот вывести список файлов и каталогов не содержащих
			 	 указанные с помощью grep критериев.
			  ~$ ls -1 | grep -v test
 grep -l		- Выводит список файлов, содержащих искомое слово или фразу
			  ~$ grep -l 'узнала' ~/*.txt
 grep | grep		- Поиск в результатах поиска.
			  ~$ ls -1 | grep test | grep -v 2015

 wc		- подсчет строк, слов и символов
	-l -w -c
 wc -l 			- подсчитывать количество полученных строк.

		   wc /etc/passwd
 
 ---- сортировка

 sort
	-b - игнорировать ведущие пробельные символы
 	-f - сортировать независимо от регистра
	-k - указать столбцы, которые формируют сортировочный ключ
	-n - сравнивать поля как целые числа
	-r - изменить порядок сортировки на противоположный
	-t - Установить разделитель полей
	-u - выводить только уникальные записи
	
	sort -t: -k3,3 -n /etc/group

 ---- поиск в бинарных файлах 
  strings	- извлечение любого доступного для чтения текста ASCII

 strings /bin/ls | grep -i libc		- Определяет наличие libc в ls
 cat /bin/ls | strings			- Отображает все тексты ASCII в ls
 strings /bin/ls			- Отображает все тексты ASCII в ls
 --------------------

 ---- Преобразование и удаление символов
 tr 			- замена символов
 
 tr '\n' ' '		- замена перехода на новую строку пробелом
 tr f F			- f на F
 tr -d f < my.txt	- Удаляе т из файла все буквы f
 echo chris| tr a-z A-Z			-| Преобразует chris в CHRIS
 echo chris| tr '[:lower:]' '[:upper:]'	 |
 ----------------------

 ---- О пределение различий между двумя файлами
 diff config config.old

 diff -u f1.txt f2.txt		- Отображает унифицированный выход команды diff
 sdiff f1.txt f2.txt 		- Объединить выход двух файлов
 vimdiff			- которая одновре­менно открывает два файла в редакторе vim и выделяет
				  различия между ними цветом о каждом процессе

 patch				- Исполь­зует старый и измененный файлы в качестве источников входящих данных,
				  а затем возвращает измененный файл.
 	diff -u f1.txt f2.txt > patchfile.txt
	patch f1.txt < patchfile.txt
	cat f1.txt
----------------------------

 ---- awk, cut
 cut		- разбивка строк на поля
	cut -d: -f7 < /etc/passwd | sort -u
		-d - можно изменить разделители
		-f - какие поля нужно включать в результат

 ps auwx | awk '{print $1,$11}' 		- Отображает столбцы 1 и 11 команды ps
 ps auwx | awk '/francois/ {print $11}' 	-| Отображает процессы пользователя francois
 ps auwx | grep francois | awk '{print $11}' 	 |

 

 awk -F: '{print $1, $5}' /etc/passwd		-| В качестве знака-разделителя для отображения
 cut -d : -f1,5 /etc/passwd			 | столбцов устанавливается двоеточие

 cut -d: -f1-5 /etc/passwd			- Отображает столбцы 1-5
 cut -d: -f5- /etc/passwd			- Показывает все столбцы, начиная от пятого






========================================================================================================
==== Администрирование файловых систем =================================================================

 ---- fdisk - разбиение жестких дисков
 sudo fdisk -l			- просмотр информации о разделах жесткого диска
 sudo fdisk -l /dev/sdb		- Выводит информацию о разделах выбранного диска

 ---- табпица разбиения
 sudo sfdisk -d /dev/sda > sda-taЬle 		- Выполняет резервное копирование таблицы разбиения в файл
 sudo sfdisk /dev/sda < sda-taЬle 		- Восстанавливает таблицу разбиения из файла
 sudo sfdisk -d /dev/sda | sfdisk /dev/sdb	- Копирует таблицу разбиения с одного диска на другой

 ---- parted - изменение разделов диска
 В отличие от fdisk, parted сразу же применяет изменения к разделам 

 sudo parted /dev/sda print 			- отобразить разделы диска /dev/sda
 sudo parted					- в интерактивном режиме
		mkpart				-  Создает новый раздел
		resize 2			- Изменяет размер раздела	
		!!!Если вы не используете LVM, эта команда просто разрушит вашу систему.

 ----
 sudo e2laЬel /dev/sda2			- просмотреть метку раздела 
 sudo e2laЬel /dev/sda2 mypartition	- назначить метку разделу

 ---- Создание файловой системы на разделе жесткого диска

 sudo mkfs -t ехtЗ /dev/sdЬ1		-  Создает файловую систему ехtЗ на разделе sba1
 sudo mkfs -t ехtЗ -v -с /dev/sdЬ1	-| Расширенная команда, выполняющая также поиск поврежденных блоков
 sudo mkfs.extЗ -с /dev/sdЬ1		 |
 
 sudo mkfs.extЗ -с -L mypartition /dev/sdЬ1	- Добавляет разделу метку

 ---- Создание виртуальной файловой системы

 dd if=/dev/zero of=mydisk count=2048000	- Создает заполненный нулями файл объемон 1 Гбайт
 du -sh mydisk					- Проверяет размер виртуальной файловой системы
 mkfs -t ext3 mydisk				- Создает файловую систему на mydisk
 sudo mkdir /mnt/image				- Создает точкv монтирования
 sudo mount -о loop mydisk /mnt/image		- Монтирует файл mydisk в каталог /mnt/image

	 размонтирование
 sudo cd /mnt/image 		- Переходит к точке монтирования
 sudo mkdir test 		- Создает каталог в файловой системе
 sudo cр /etc/hosts 		- Копирует файл в файловую систему
 cd 				- Выходит из файловой системы
 sudo umount /mnt/image 	- Демонтирует файловую систему


 ---- Просмотр и изменение атрибутов файловой системы
 sudo tune2fs -l /dev/sda1	-| Отображает настраиваемые атрибуты файловой системы
 sudo dumpe2fs -h /dev/sda1	 |
 
 ---- Создание и использование разделов подкачки
 sudo mkswap /dev/sda1		- Форматирует раздел sda1 как раздел подкачки
 sudo mkswap -с /dev/sda1	- проверить раздел подкачки на наличие поврежденных блоков

|sudo dd if=/dev/zero of=/tmp/swapfile count=65536 	-| Если нет свободного раздела,
| 							 | то в качестве обласm подкачки
|							 | можно использовать файл
|sudo chmod 600 /tmp/swapfile 	-| Затем, чтобы во время работы не отображались предупреждения
|				 | от команды swapon, ко­манда chmod закрывает к этому файлу
|				 | доступ
|sudo mkswap /tmp/swapfile	-| После этого, чтобы назначить файл /tmp/swapfi1е разделом
|				 | подкачки, команда mkswap форматирует его.
|sudo swapon /dev/sda1		-| Задействуе т раздел /dev/sda1 в качестве раздела подкачки
|sudo swapon -v /dev/sda1	-| Задействует раздел в качестве раздела подкачки и отображает
|				 | больше информации о нем swapon on /dev/sda1
|sudo swapon -v /tmp/ swapfile	-| Задействует файл /tmp/swapfile в качестве раздела подкачки
				   swapon on /tmp/swapfi1e

  sudo swapoff -v /tmp/swapfile	- деакmвировать область подкачки

 ==== Монтирование и демонтирование файловых систем
 ---- 
 mount			- Команда для монтирования дисков, образов, флешнакопителей. 
			  Команда записывается следующим образом: 
			  mount -t iso9660 образ_диска директория_куда_монтировать
			  :~$ sudo mount -t iso9660 ~/Boot.iso ~/mnt
 mount -t ext3		- Отображает смонтированные ехtЗ-файловые системы
 mount -t ext3 -l	- Отображает смонтированные ехtЗ-файловые системы и их метки

 sudo mount /dev/sda1 /mnt/mymount/	- Монтирует локальную файловую систему
 sudo mount -v /dev/sda1 /mnt/mymount/ 	- Монтирут файловую систеу и выводит более подробную
					  информацию
 sudo mount -v /dev/sda1		- Монтирует файловую систему по имени устройства
					  хранения
 sudo mount -v /mnt/mymount/		- Монтирует файловую систему на основании точки
					  монтирования

 sudo mount -v -t ехtЗ /dev/sda1 /mnt/mymount/	- Для точного определения типа файловой 
						  системы, предназначенной для мон­тирования,
						  используйте параметр - t
 
 параметр -о определяет параметры монтированив раздела:
	rw	- для чтения и записи 
	ro 	- только для чтения

 sudo mount -v -t ехtЗ -о rw /dev/sda1 /mnt/mymount/ 	- Монтирует раздел с правами 
							  чтения и записи
 sudo mount -v -t ехtЗ -о ro /dev/sda1 /mnt/mymount/ 	- с правами только чтения


 Параметры mount:
 noatime 	- не обновляет время доступа к файлам, полезен при работе в файловых
		  системах с большим количеством входящих и исходящих потоков, таких как
		  почтовые серверы и журналы.
 noexec 	- предотвращает выполнение бинарных файлов, хранящихся на данной файловой
		  системе. Параметр может использоваться для повышения безопас­ности , например
		  для каталога /tmp в среде с неавторизованными пользователями.
 remount 	- изменяет параметры монтированной файловой системы. С помощью этого параметра
		  вы можете размонтировать файловую систему, а потом снова ее смонтировать с
		  уже новыми параметрами. В следующем примере изменяют­ся права чтения и записи
		  только на чтение:
		  sudo mount -v -о remount, ro /dev/sda1
 --bind 	- монтирует существующую файловую систему, используя другую точку монтирования.
		  Если раздел /dev/sda1 уже смонтирован в каталог /mnt/mymount, выполните
		  следующее:
		  sudo mount --bind -v /mnt/mymount/ /tmp/mydir/
		  Теперь одна и та же файловая система доступна по двум адресам. Новая точка
		  монтирования обладает теми же параметрами, что и оригинальная.
 --move 	- перемещает файловую систему из одной точки монтирования в другую. Если раздел
		  /dev/sda1 уже смонтирован в каталог /mnt/mymount, то использование данного
		  параметра переместит файловую систему в каталог /tmp/mydir:
		  sudo mount -v --move /mnt/mymount/ /tmp/mydir/


 sudo losetup /dev/loopO	- Отображает список смонтированных петлевых устройств
 sudo losetup -d /dev/loop1	- Принудительное демонтирование смонтированного петпевого устройства



 umount директория 		- Команда размонтирования. 
				  ~$ sudo umount ~/mnt

 sudo umount -v /dev/sda1	- Размонтирует устройство по его имени
 sudo umount -v /mnt/mymount/	- Размонтирует устройство по точке монтирования

 sudo lsof | grep mymount	- Ищет открытые файлы в разделе mymount

 sudo eject /dev/cdrom		- Размонтирует и извлекает конпакт-диск

 ==== Проверка файловых систем
 sudo badbocks /dev/sda1	- Осуществляет поиск физически поврежденных блоков на жестком диске
 sudo badblocks -v /dev/sda1	- Отображает подробную информацию о сканировании жесткого диска
 sudo badЬlocks -vsn /dev/sda1	- Выполняет безопасную проверку дисков на наличие поврежденных блоков
 

!sudo badЬlocks -vsw /dev/sda1	- Проверяет диск на наличие поврежденных секторов
				  уничтожая записанные данные

 Вы можете выполнять сразу несколько тестов на наличие поврежденных сек­торов:
 sudo badЬlocks -vswp 2 /dev/sda1 - для записи ком­пакт-дисков и одновременного вывода на экран
				   информации о поврежденных секторах

 Как и mkfs, команда fsck представляет собой лишь устройство сбора данных отдельных утилит файловых 
 систем
 sudo fsck /dev/sda1		- проверить файловую систему ext3 /dev/sda1
	- Т 			- скрывает номер версии fsck
	- V 			- отображает более подробную инфор­мацию о выполнении fsck 
				  в реальном времени
 sudo fsck - ТV /dev/sda1	- Проверяет файловую систему (отображает подробную информацию, 
				  но скрывает версию
				  вам будет задан вопрос, хотите ли вы ее исправить
 ---- Проверка дисков RAID
  sudo mdadm -Q /dev/md1	- проверка устройств softraid
	--detail		- для отображения более подробной информации 

 ---- Получение информации об использовании файловой системы
 df - h				- Отображает информацию о дисковом пространстве 
				  в удобной для восприятия форме
 df -hi				- проверить объем файлов inode
 df -hl				- Отображает дисковое пространство, 
				  занимаемое только локальными файловыми системами
 df -hT				- Добавляет в список информацию о типе файловой системы
 df -i


 

 du				- для определения занимаемого отдельными файлами и каталогами места ­ du -s 				- 	без его подкаталогов
 du -h /home/ 			- Отображает обьём занимаемого каталогом /home пространства
 du -sh /home			- Обычному пользователю закрыт доступ к домашним
				  каталогам других пользователей
 sudo du -sch /home /var	- Отображает отчет для одного и всех каталогов

 sudo du -sh --exclude='*.iso' /home/chris 	- Исключает файлы образов ISO

 sudo du -h --max-depth=1 /home		- Определяет исnользование дискового пространства 
					  до первого уровня вложенных каталогов
 sudo du -h --max-depth=2 /home		- до второго уровня

 ==== Программа управпения логическими томами (LVM)

 Для примера используется флешка /dev/sdb

 ---- Соэдание томов LVM

 sudo fdisk /dev/sdb		- Выполняет команду для управления разделами диска

 	р			- Отображает список (Существующих разделов (таких нет)
	n			- Создает новый раздел
	р			- Делает данный раздел основным
 	1			- Назначает разделу номер 1
	Enter
	t			- Определяет тип раздела
	8E			- Код LVМ-раздела
	р			- Отображает информацию о новом разделе
	w			- создайёт новую таблицу разбиения

 sudo sfdisk -l /dev/sdb	- Выводит список LVМ-разделов
 sudo pvcreate /dev/sdЬ1	- Делает носитель sdb1 физическим томом LVM
 sudo vgcreate vgusb /dev/sdЬ1	- Создает груnпу томов vgusb
 sudo vgs			- Отображает текущие группы томов

 sudo lvcreate --size 1OM --name lvm_ul vgusb 	-| Для создания нового LVM-раздела размером 1О Мбайт
						 | из группы томов vgusb воспользуйтесь 
						 | командой lvcreate
 sudo lvs			- Отображает информацию о логическом томе
 sudo vgs			- Показывает, что у вас есть 16 Мбайт свободного места

 sudo mkfs.extЗ /dev/mapper/vgusb-lvm_ul  	- создать на LVM-разделе файловую систему ехtЗ

 ---- Использование томов LVM

 sudo mkdir /mnt/ul 		- Создает точку монтирования

 sudo mount -t ехtЗ /dev/mapper/vgusb-lvm_ul /mnt/u1 	- Монтирует том
 
 df -m /mnt/ul			- Проверяет объем доступного дискового пространства
 ls /mnt/ul
 cр /boot/vmlinuz-* /mnt/ul/	- Копирует крупный файл в /mnt/ul
 df -m /mnt/ul			- Показывает, что каталог /mnt/ul имеет объен 4 Мбайт

 md5sum /mnt/ul/vmlinuz-2.6.20-1.2316.fc5		- Сверяет информацию с md5sum

 ---- Увеличен ие тома LVM
 sudo umount /mnt/ul		- Демонтирует том

 sudo lvresize --size lбM /dev/vgusЬ/lvm_ul		- Изменяет размер тома
 sudo e2fsck -f /dev/vgusЬ/lvm_ul  			- проверяет файловую систему
 
 sudo resize2fs /dev/vgusЬ/lvm_ul lбM			- Изменяет размер файловой системы
 sudo mount -t ехtЗ /dev/mapper/vgusb-lvm_ul /mnt/ul 	- Зaнoвo монтирует том

 df - m /mnt/ul			- Показывает, что использовано 4 Мбайт из 16 Мбайт

 md5sum /mnt/ul/vmlinuz-2.6.20-1.2316.fc5		- Заново проверяет md5sum

 ---- Уменьшение размера тома LVM

 sudo umount /mnt/ul		- Демонтирует том

 sudo e2fsck -f /dev/vgusЬ/lvm_ul  			- проверяет файловую систему
 sudo resize2fs /dev/vgusЬ/lvm_ul lбM			- Изменяет размер файловой системы
 sudo lvresize --size lбM /dev/vgusЬ/lvm_ul		- Изменяет размер тома
 y							- соглашаемся
 sudo mount -t ехtЗ /dev/mapper/vgusb-lvm_ul /mnt/ul 	- Зaнoвo монтирует том

 df - m /mnt/ul			- Показывает, что использовано 4 Мбайт из 16 Мбайт

 ---- Удапение логических томов и групп LVM

 sudo lvremove /dev/vgusЬ/lvm_ul	- удалить логический LVМ-том из группы томов
 sudo vgremove vgusb			- Для удаления целой группы LVM-томов

===========================================
==== Создание резервных копий и работа со съемными носителями ====================================

 ==== Резервное копирование файлов через сеть
 Программы:	sudo apt-get install -y rsnapshot sshfs

 ---- Резервное копирование архивов tar через ssh

 --------  собирать резервные копии данных с машин-клиентов

 Следующая ко­манда выполняет команду tar на удаленном клиенте (для архивирования и сжа­тия
 файлов), направляет поток данных на стандартный выход и использует ко­манду ssh для локального
 размещения резервных копий данных посредством tar:

 mkdir mуЬасkuр ; cd mуЬасkuр
 ssh francois@server1 'tar cf -myfile*' | tar xvf -

 все файлы, начинающиеся с myfilе, копируются из рабочего каталога пользователя francois на
 server1 и помещаются в текущий каталог. Заметьте, что с левой стороны канала создается архив, а
 с правой стороны файлы из архива перемешаются в текущий каталог (запомните, что ssh переписывает
 локальные файлы, если таковые существуют, и именно поэтому в примере мы создали пустой каталог)
 ---------
 --------- скопировать-файлы с локальной систе­мы на удаленную

 I. необходимо сначала выполнить команду tar, а затем для поме­щения файлов в выбранный каталог на
 удаленном компьютере использовать команду сd
 
 tar cf -myfile* | ssh francois@server1 \

 II. не распаковываем файлы tar на передающей стороне, а записываем резульЬтаты в файлы TGZ

 ssh francois@server1 'tar czf - myfile*' | cat > myfiles.tgz	
								-| файлы из рабочеrо каталога
	| пользователя francois, хранящие­ся на server1 и начинающиеся на myfi1е, заnаковываются в
	| архив ТAR, который затем сжимается, после чего уже запакованные файлы направляются в
	| файл myfiles.tgz на локальной системе.

 tar cvzf - myfile* | ssh francois@server1 'cat > myfiles.tgz'	
								-| выполняется обратное действие:
	| из локального каталога выбираются все файлы, начинающиеся на myfilе, и направляются в
	| файл myfiles.tgz, находящийся на удаленной системе
 ---------

 ==== rsync	-| для осуществления резервного копирова­ния с одного компьютера на другой, 
		 | однако это предполагает, что данные изме­няются только на компьютере, с которого
		 | осуществляется резервное копирование.

	-а	- выполняет коман­ду в режиме архивации 
		  (рекурсивного копирования всех файлов из удаленного каталога)
	-z 	- сжимает файлы
	-v	- детализирует возвращаемую информа­цию
	--delete- указывает команде rsync на необходимость удалять любыефайлы на локальной
		  системе, которые больше не сущест�уют на удаленной.

  rsync -avz --delete chris@server1:/home/chris/pics/ chrispics/	-| rsync используется
						| через консоль ssh для получения зеркала каталога

 ---- Для непрерывного пошагавого резервного копирования

# mkdir /var/backups				  -| При запуске приведеиной команды все файлы из
# rsync --delete -backup			\  | каталога / home/chris/Personal на удаленном
  --backup-dir=/var/backups/backup-`date +%A`	\  | компьютере server1 копируются в локальный 
  -avz chris@server1:/home/chris/Personal/	\  | каталог /var/backups/ предназначенный для
  /var/backups/current-backup/			   | хранения текущих резервных копий. Все
						   | изменяющиеся файлы копируются в каталог
	| с соответствующим дню недели названием, например /var/backups/backup-Monday. По
	| окончании недели будет создано семь каталогов, отражающих все произведенные за это
	| время изменения.
 ---------------
 
# rm - rf /var/backups/backup-old/
# mv /var/backups/backup-current/ /var/backups/backup-old/
# rsync --delete --link-dest=/var/backups/backup-old -avz \
  chris@server1:/home/chris/Personal/ /var/backups/backup-current/

 текущий резервный каталог заменяется предыдущим посредством удаления резервных копий прошлой
 недели и замены их резервны­ми копиями текущей недели. Если любой из файлов, скопированных из
 лично­го удаленного каталога и расположенных на компьютере server1, существовал при предыдущем
 резервном копировании, то при Запуске посредством команды rsync с параметром --link-dest нового
 резервного копирования будет создана жесткая ссылка, связывающая файлы в текущем и старом
 резервных катало­гах.


 ==== unison	-| если у вас есть два компьютера и они оба изменяют один файл, а вам необходимо
		 | синхронизировать эти файлы
		 | sudo apt-get install -y unison
		 | [2:183]

 unison /home/francois ssh://francois@server1//home/fcaen	-| С помощью unison вы сможете
 unison /home/francois /mnt/backups/francois-homedir		 | создать учетные записи двух
								 | суперпользователей, тем самым
	| обеспечив два пути синхронизации.
	| Эти учетные записи могут быть как локальными, так и удаленными
	| Убедитесь, что на обоих компь ютерах установлена одинаковая версия uпison


 ==== Резервное копирование данных на съемные носители

 mkisofs	- осуществляет резервное копирование файлов и структуры каталогов из любой точки
		  файловой системы Linux, а затем создаёт образ IS09660
		 [2:185]

 cd /tmp
 sudo mkisofs -o home.iso /home 		- Создает базовый образ 1509660
 sudo mkisofs -о home2.iso -J -R /home 		- Добавляет расширения Joliet Rock Ridge
 sudo mkisofs -о homeЗ.iso -J -R -hfs /home 	- Добавляет расширения HFS


 mkisofs -o home.iso -R -J music/ docs/      \ 	- Добавляет несколько каталогов /файлов
 chris.pdf /var/spool/mail

 mkisofs -о home.iso -J -R 		     \	-| Присоединяет файлы к ветви с образом
 -graft-points Pictures/=/usr/share/pixmaps/ \	 | содержимое каталога /var/pics присоединяется
 /home/chris 					 | к каталогу /home/chris/Pictures, в результате
						 | чего на компакт-дис­ке с образом в каталоге
	| /Pictures будет находиться все содержимое каталога /usr/share/pixmaps
 

 ==== Запись образов
 cdrecord
 wodlm		[2:187]
 ==== Создание и запись DVD
  growisofs


==================================================================================================
==== Проверка запущенных процессов и управление ими ==============================================
 ---- ps
 ps			- Отображает в консоли процессы текvщего пользователя
 ps -u chris 		- все процессы, запущенные пользователем chris (стандартный вывод )
 ps -u chris u		- 	с учетом использования CPU/MEM
 ps -fu chris		- 	с учетом РРID
 ps -Fu chris		- 	с учетом SZ и PSR 

			-| Информация о всех запущенных процессах.
 ps -ef			 | 
 ps -е			 |
 ps -еl			 |
 ps -еF			 |
 ps -ax			 | - в сжатом стиле ВSD
 ps aux			 | - в полном стиле ВSD
 ps auwx		 | - в полном стиле BSD и расширенном формате
 ps auwwx		 | - в полном стиле BSD и неограниченной шириной

 ps -ejH		-  в иерархическом порядке на основании ID процессов или сессий 
 ps axjf		-  в иерархическом порядке в стиле BSD
 ps -ef -f		-  в иерархическон порядке в виде леса
 pstree 		-  в алфавитном порядке в виде дерева

	 -o
 ps -ео ppid,user,%mem,size,vsize,comm --sort=-size 	-| Сортирует процессы по уровню 
							 | использования оперативной памяти

 %cpu		%CPU		- Уровень использования времени центрального процессора
				  за время существования процесса в формате 00.0
 %mem		use (resideпt	- Уровень использования процессам физической памяти (в процентах)
		set size)	
 args		COMMAND		- Команда со всеми аргументами
 Ьsdstart	SТART		- Время запуска команды в формате ЧЧ:ММ или Месяц:День
 Ьsdtime 	ТIМЕ		- Полное (включая пользователя и систему) время использования
				  времени центрального процессара
 comm		COMMAND		- Только имя команды (без аргументов)
 ер		СР		- Уровень использования времени центрального процессара
				  в десятых долях процента
 cputime	ТIМЕ		- Полное время использования центрального процессара в формате
				  [DD-]HH:MM :SS
 egid		EGID		- Эффективный идентификатор группы процесса (целое число)
 egroup		EGROUP		- Эффективный идентификатор группы процессов (имя)
 etime		ELAPSED		- Время запуска процесса в формате [[DD-]HH:] MM:SS
 euid		EUID		- Эффективный идентификатор пользователя, запустившего процесс
				  (одно целое)
 euser		EUSER		- Эффективный идентификатор пользователя, запустившего процесс (имя)

 Продолжение [2:196]
 ----------------------------

 ps -С httpd 				- Отображает запущенные httpd-пpoцeccы
 ps -р 5413 -о pid,ppid,bsdtime,args	- Отображает информацию о процессе PID 5413
 ps -U chris,francois -о pid,ruser,tty 	- Отображает информацию о двух пользователях

 ----  top 
 top 			 - Показывает динамически обновляемый список выполняющихся процессов

 top -d 5		- Устанавливает время обновпения равным 5 секvндам (по умолчанию 3)
 top -u francois 	- Отображает только процессы действительного пользователя francois
 top -р 190,2690	- Отображает только процессы 190 и 2690
 top -n 10		- После десятиобновлений завершает выполнение команды
 top -b 		- Запускается в режиме, не рассчитаннон на работу с экраном

 top -b -n 12000 > myprocesslog  - фиксируюет информацию о процессах в течение деся­ти часов

 -------------

 pgrep 			- позволяет искать необходимые про­цессы через активные процессы

 pgrep init		- Отображает ID всех процессов, содержащих «init»
 pgrep -l init		- Отображает PID и имена всех процессов, содержащих «init»

 pgrep -lu chris	- Перечисляет все процессы, принадлежащие пользователю chris
 ps -р 'pgrep metacity'	- Осуществляет поиск процесса metacity и 
			  выполняет команду ps (краткий вывод)
 ps -fp $(pgrep chrome)	- Осуществляет поиск процесса chrome и 
			  выполняет команду ps (полный вывод)

 ---- fuser

 fuser			- поиск по эле­менту, осуществляющему доступ к процессу

 fuser -mauv /boot	- Отображает подробный список процессов, открывших /boot
 fuser /Ьооt		- Отображает родительские PID процессов, использующих файлы в /boot
 fuser -m /boot		- Отображает все PID процессов, использующих файлы в /boot
 fuser -u /bооt		- Отображает PID или имя пользователя консоли, работающей в /boot
 sudo fuser -k /bооt	- Уничтожает все процессы с открытыми файлами в /boot (SIGKILL)
 fuser -l		- Отображает список поддерживаемых сигналов

 sudo fuser -k -HUP /boot 	- Отправляет НUР-сигнал всен процессам,
				  работающим с файловой систеной /boot
 -------------------------

 nice			- установить приоритет по умол­чанию, а также повысить или понизить
			  приоритет процесса во время его запуска.
 reniсе 		- изменять приоритеты текущих процессов

 nice			- Определяет текущее значение nice

 nice -n 12 nroff -man a.roff |less 	- Выполняет форматирование MAN-страниц 
					  при пониженнон приоритете
 
 sudo nice -n -10 gimp	- Повышает приоритет конанды gimp
 renice +2 -u francois	- Увеличивает значение nice процессов пользователя francois на 2
 renice +5 4737		- Увеличивает значение nice процессов пользователя PID 4737 на 5

 sudo renice -3 `pgrep -u chris spamd`	- Понижает значение процессов spamd пользователя chris на 3

#renice -5 $(pgrep firefox)	- Выполняет поиск процесса firefox и повышает приоритет команды

 ---- Запуск процессов в фоновом и приоритеТном режимах

 gimp		- Запускает gimp в фоновом режиме
 <Ctrl+Z>	- Останавливает процессы и перемещает их в фоновый режим
 bg 1		- Заново в фоновом режине запускает работающие процессы
 fg 1		- Продолжает выполнение процессов в фоновом режиме
 <Ctrl+C>	- Уничтожает процесс

 jobs		- Отображает список процессов текvщей консоли, выполняющихся в фоновом режиме
 jobs -l	- Отображает PID вместе с информацией о каждон процессе
 jobs -l %2	- Отображает информацию только для процесса под нонером %2

 disown %З	- Отделяет процесс %З от текущей консоли
 disown -a	- Отделяет все процессы от текущей консоли
 disown -h	- Ограничивает все процеtсы от действия НUР-сигнала, отправленного в текvщую консоль



 ---- Уничтожение процессов и отправление им сигналов

  Стандартные сигналы, отправляемые процессам [2:205]

 1 		SIGHUP	- Сигнал завершения процесса терминала или контрольного процесса
 2		SIGINT	- Отправка с клавиатуры сигнала прерывания
 3		SIGQUIТ	- Отправка с клавиатуры сигнала прекращения
 4		SIGILL	- Неразрешенная команда
 б		SIGAВRT	- запрет на выполнение, отправляемый функцией aЬort
 8 		SIGFPE	- Исключение с плавающей точкой
 9		SIGКILL	- Сигнал полного завершения (уничтожения) процесса
 11		SIGSEGV	- Недействительная ссылка на ячейку памяти
 13		SIGPIPE	- Неработающий канал (нет процессов, которые могут быть считаны с канала)
 14		SIGALRM	- Сигнал таймера, обозначающий аварийный системный вызов
 15		SIGТERM	- Сигнал завершения
 30, 10, 16	SIGUSR1	- Определяемый пользователем сигнал 1
 31, 12, 17	SIGUSR2	- Определяемый пользователем сигнал 2
 20, 17, 18	SIGCHLD	- завершенный или остановленный дочерний процесс
 19, 18, 25	SIGCONT	- Возобновление остановленного ранее процесса
 17, 19, 23	SIGSТOP	- Сигнал остановки процесса
 18, 20, 24	SIGТSТP	- Сигнал остановки, введенный в терминале
 21, 21, 26	SIGTIN	- Ввод терминала для фоновых процессов
 22, 22, 27	SIGTTOU	- Вывод терминала для фоновых процессов

 kill 28665 			- Отправляет сигнал SIGTERM процессу PID 28665
 kill -9 4895 			- Отправляет сигнал SIGKILL процессу PID 4895
 kill -SIGCONT 5254 		- Возобновляет остановленный процесс (PID 5254)
 kill %З 			- Уничтожает процесс %3
 killall spamd			- Уничтожает все запущенные процессы spamd
 killall -SIGHUP sendmail	- Заставляет nроцесс sendmail перечитать конфигурационные файлы

 
 pkill
 killall
 
 ---- Отключение процессов от текущей консоли
 
 nohup 		- запустить процесс таким образом, чтобы он был недоступен сигналу hang-up

 Использование команды nohup отличается от запуска команды с использованием символа &, поскольку
 команда nohup продолжает выполнение команды даже после выхода из запущенной сессии в консоли.

 nohup updatedb & 		- Запускает updatedb с невозножностью его прерывания
#nohup nice -9 gcc hello.c&	- Запускает gcc в непрерывном режиме и с более высоким приоритетом

 ---- Составление расписания запуска процессов
 
 at		- запускает выбранную команду в заданное время

 at now +1 min	- Запускает команду через одну нинуту
 at teatime	- Запускает команду в 16.00 текущего дня
 at now +5 days	- Запускает команду через пять дней
 at 06/25/08	- Запускает команду 25 июня 2008 года в текущее вреня

 batch		- Немедленно запускает конанду

 atq		- проверить очередность установленных задач at
 atrm 11	- Удаляет задачу at под нонером 11

 cron		- многократно выполнять указанные коман­ды

 crontab -е	- Создает персональный файл crontab

 Существуют разные варианты внесения данных в файл crontab:

 15 8 * * Mon.Tue.Wed.Thu.Fri mail chris < /var/project/stats.txt	-|  пользователю chris
									 | отправляется сообщение,
	| содержащее файл /var/project/stats.txt. Эта команда выполняется ежедневно с понедельника
	| по пятницу включительно в 8:15.

 * * 1 1.4.7.10 * find / | grep.doc$ > /var/sales/documents.txt	-| в первые дни января, апреля,
								 | июля и октября запускается
	| команда find и производит поиск всех имеющихся в системе файлов с расширением DOC, а
	| затем группирует список файлов в файле /var/sales/documents.txt

 В конце каждой строки crontab указывается выполняемая команда. 
 Первые пять полей определяют время и дату запуска команды (поля слева направо: 
 
	минуты 		часы	дни месяца 	месяцы			дни недели
	от О 		от О 	от О 		от О (			от О (от О
	до 59		до 23	до 31		до 12 			до 7
					Jan, Feb, Mar,Apr, Мау, Jun, 	Sun, Mon, Tue,
					Jul, Aug, Sep, Oct, Nov и Dec   Wed, Thu, Fri и Sat

 Знак * означает, что значение поля не определено 
 и в него может быть добавлена соответствующая информация.


#crontab -eu chris	- Редактирует файл crontab другого пользователя 
			  (только для суперпользователя)
 crontab -l		- Отображает содержимое файла crontab
 crontab -r		- Удаляет файл crontab

 Ubuntu позволяет настроить ежечасное, ежедневное, еженедельное и ежемесячное выполнение задач cron
 путем связывания команды, которую необходимо запус­тить, с каталогом cron. Для этого просто введите
 команду, которую хотите запустить, а затем скопируйте ее в каталог 
 /etc/cron.hourly,	/etc/cron.dailу, 	/etc/cron.weekly 	или	/etc/cron.monthlу 			

 anacron 	- чаще всего используется на компьютерах, которые не по­стоянно включены. 
		  Если команда не была запущена, поскольку компьютер был выключен во время
		  предполагающегося выполнения команды, то при следующем включении компьютера
		  утилита anacron выполнит заданную команду.

==================================================================================================

====  Администрирование системы ==================================================================
 	sudo apt-get install sysstat

 ==== Оперативная память

 free			- Отображение информации об оперативной памяти (в килобайтах).
	-m		- 	в мегабайтах
	-b		- 	в блоках
 	-mt		- 	Swap + RAM
?	- 		- 	в гигабайтах
	-s 5		-  	с интервалом в пять секунд

 vmstat 		- отображать объем используемой оперативной памяти
 vmstat 3		- 	каждые 3 секунды
 	-S m		- 	в мегабайтах (1 000 Кбайт)
	-S M		- 	в мегабайтах (1 024 Кбайт)
	-S k		- 	в килобайтах (1 000 байт)
	-S К		- 	в килобайтах (1 024 байт)
	-n 2 10		- Обновляет информацию каждые две секунды в течение 20 секунд
	-s | less	- Отображает счетчик количества событий и статистику 
	-S М -s | less	- Отображает статистику в мегабайтах
	-m | less	- Отображает информацию о кэш-памяти ядра

 slabtop		- отобразить информацию о кэш-памяти ядра в графическом режиме

 ==== Процессор

 iostat -с 3		- Отображает обновляемую каждые три секунды статистику использования
			  процессора (запускаемые приложения )
 iostat -с -t		- Отображает подпись времени в отчете об использовании процессора
 iostat -с -t 2		- Выводит статистикv и обновляет ее каждые две сецунды в течение 20 секунд

 dstat 			- просматривать информацию о загрузке цен­трального процессора 
 dstat -t -с 3		- Отображает и непрерывно обновляет информацию о загрузке процессора,
			  используя подписи вренени

 cat /proc/cpuinfo	- Отображает информацию о процессоре, содержащуюся в каталоге /proc


 ==== Запоминающие усrройства

 iostat 3		- Проверяет скорости чтения с диска и записи на диск
 vmstat -d		- Отображает данные о чтении с диска, записи на него 
			  и статистикv ввода/вывода
 vmstat -р sda1		- Отображает статистику чтения/записи для выбранного раздела диска

 lsof | less 		- Отображает процессы, не позволяющие закрыть файлы и каталоги

 lsof -с bash 		- Отображает файлы, используемые консопью bash
 lsof -d cwd 		- Выводит каталоги, открытые как текvщие рабочие каталоги
 lsof -u chris		- Отображает файлы и каталоги, открытые пользователем chris
 lsof /mnt/sda1		- Выдает все о ткрытые элементы файловой системы /mnt/sda1
 lsof +d /mnt/sda1/dx	- Отображает все открытые элементы, хранящиеся 
			  в каталоге /mnt/sda1/dx и его подкаталогах

 ==== Управление временем
 sudo cр /usr/share/zoneinfo/America/Chicago /etc/localtime	-| Установка временной зоны
 sudo ln -s /usr/share/zoneinfo/America/Chicago /etc/localtime	 |

 ----  Cистемное время

 date				- Отображает текущую дату, время и временную зону
 date '+%A %B %d %G'		- Отображает день недели, месяц, число, год
 date '+The date today is %F'	- Добавляет текст к дате
 date --date='4 weeks'		- Отображает дату, которая наступит через 4 недели 
				  (начиная с сегодняшнего дня)
 date --date='8 months 3 days'	- Отображает дату, которая наступит через  8 месяцов и 3 дня
 date --date='4 Jul' +%А	- Отображает день недели, на который приходится 4 июля

 cal				- Показывает календарь на текущий месяц.
 cal 2007			- Отображает календарь на весь год
 cal -j 			- Отображает юлианский календарь (начало с 1 января)


 sudo date 081215212008		- Изненяет дату и время на 12 Авг. 14:21 2008
 sudo date --set='+7 minutes'	- Переводит часы на 7 минут вперед
 sudo date --set='-1 month'	- Изменяет текущий месяц на предыдущий

 ---- Аппаратное время

 hwclock -r			- Отображает текущие настройки аппаратного времени
 sudo hwclock -hctosys		- Сбрасывает системное время до значения аппаратного
#hwclock -systohc		- Сбрасывает аппаратное время до значения системного
 sudo hwclock -adjust		- Задает смещение значения аппаратного времени
				  Выровнять значение аппаратного време­ни 

 sudo hwclock --set --date="З/18/08 18:22:00" 	- Устанавливает новые значения даты и времени
						  18.03.2008

 ---- Использование сетевого протокола времени дпя установки даты и времени

 sudo apt-get install ntp	- Устанавливает пакет ntp (nри необходимости)

 sudo ntpd - qg
	-q 	- указывает утилите ntpd прекратить работу после синхронизации времени
		  (при работе в качестве демона она продолжает работать)
	-g	- предотвращает выполнение ntpd, 
		  если системные часы отключены на протяжении более 1000 секунд

 ==== Управление процессом загрузки

 ---- Загрузчик GRUB

 /boot/grub/menu.lst	(по книге)
 /boot/grub/grub.cfg 	(у меня [KDE kubuntu])
 
 default=O				- первая строка загружается по умолчанию
 timeout=5				- перед началом загрузки GRUB выводит на пять секунд экран-заставку
 hiddenmenu				- во время отображения заставки не будет выводиться список загружаемых
					  компонентов (для открытия меню достаточно нажать любую кнопку)
 title Ubuntu. kernel 2.6.20-16-generic - Запись загрузки ( title Ubuntu ) относится к первому разделу первого
					  жесткого диска (hdO.0), на котором находятся загружаемые ядро и
					  начальный псевдодиск ( initrd )
 root (hd0.0)
 kernel		/vmlinuz-2.6.20-16-generic
 root=UUID=db2dac48-a62e-4dbe-9529-e88a57Ы5bac го quiet splash
 initrd 	/initrd.img-2.6.20-16-generic

 -------------

 sudo grub-install /dev/sda		- Теперь предположим, что загрузка про­изошла с первого жесткого
						  диска SATА. Тогда, чтобы перезагрузить загрузчик для MBR

 	Для создания файла menu.lst достаточно выполнить команду update-grub, а затем следовать отображаемым
	инструкциям: sudo update-grub

 ==== Исправление неполадок основного псевдодиска (initrd)

 Файл initrd хранится в папке /boot под таким именем: initrd.img-2.6.20-16-generic

 Если файл initrd будет поврежден или потребуется добавить в него новые драйве­ры блочных устройств,
 воспользуйтесь командой mkinitrd. Сначала сделайте копию старого файла, а затем выполните следующие команды:

$ sudo apt-get install initrd-tools
$ sudo mkinitrd -о /boot/ initrd.img-2.6.20-16-generic

 Теперь замените ядро старой версии (2.6.20-1.2320.fc5) новым. Чтобы исполь­зовать предыдущую версию ядра,
 выполните следующее:

$ sudo mkinitrd -о /Ьoot/initrd.img-'uname -r' 'uname -r'

 К сожалению, часто пользователи слишком поздно осознают, что им нужно заменить файл initrd, -- после того как
 замечают неполадки в ядре во время мон­тирования корневой файловой системы. Если это произойдет, перезагрузите
 сис­тему в безопасном режиме, как это было описано ранее, а затем выполните коман­ды 
 chrooting и mkinitrd для соответствующего раздела жесткого диска.

 ==== Контроль уровней загрузки и выполнения

 runlevel		- Отображает текущие и предыдущие уровни выполнения
 :N 3			~ Поскольку в данном примере система загружалась с уровнем выполнения 3,
			  предыдущего уровня выполнения просто не существует (N).
 
 sudo init 5		- Изменяет текущий уровень выполнения на 5 (Рабочий стол X)

 sudo init q		- Запускает или останавливает процессы, измененные в файле inittab

 /etc/init.d/ntp	- Отображает статистикv использования (без параметров)
	Параметры:
	restart		- Перезапускает сервис NTP (выключает и затем включает)
	try-restart 	- Перезапускает сервис NTP (если уже запущен)
	force-reload 	- Обновляет настройки конфигурационного файла
	ntp status	- Проверяет, запущен ли сервис NTP
	stop		- Останавливает сервис NTP


 sudo update-rc.d ntp defaults		- Включает службу NTP
					  С помощью команды update-rc.d можно включать службы или выключать их,
					  основываясь на уровне их выполнения


 sudo reboot		- Перезагружает компьютер
 sudo halt -n		- Останавливает запуск sync для синхронизации жестких дисков перед выключением системы
 sudo halt -h		- Перед остановкой работы системы переводит жесткие диски в режим ожидания
 sudo shutdown 10	- Предупреждает пользователей и через 10 минут выключает компьютер
 sudo shutdown -r 10	- 					       перезагружает компьютер
 sudo shutdown 10 'Вуе!'- Отправляет каждому пользователю сообщение перед выключениен конпьютера

 shutdown		- Команда управления питанием системы.
			  shutdown аргумент условие
			  -r - перезагрузка системы;
			  -P - выключение питания.
			  -c - отменить запланированное выключение.	
			Условие может быть следующим:	
			  +минут — указывает через сколько минут будет выполнена команда shutdown. 				  	  shutdown -r +22
			  время — shutdown -P 19:00
			  now — указывает, что команда shutdown будет выполнена немедленно.

 ==== Ядро

 uname -r		- Показывает информацию о версии ядра Linux. slava@slava:~$ uname -r
 uname -a		- Показывает информацию о пользователе, типе архитектуры системы и др.
       -sr
       -
 dmesg | less		- отобразить содержимое кольцевого буфера ядра
 lsmod			- просматривать имена загружаемых модулей, их раз­мер,
			  а также отображать использующие их модули
 modinfo snd_ens1371	- получить более подробную информацию о конкретном мо­дуле

 modprobe -l | grep c-qcam	- Отображает все модули, затем ищет c-qcam
				  добавить или удалить зaгpyжaeмый модуль, чтобы некото­рые устройства работали
					 правильно
				  для отображения списка всех доступных модулей или удалении некоторых на ниx
 sudo modprobe c-qcam		- Загружает модуль Color QuickCam
 sudo modprobe -r c-qcam	- Удаляет модуль Color QuickCam


	sysctl		- контролировать параметры ядра при запущенной системе. 
			  можно добавлять параметры в файл /etc/sysctl.conf, если необхьдимо, 
			  чтобы oни загружались одновременно как группа или при каждой перезаrрузке системы

 sudo sysctl -а | less			- Отображает все параметры ядра
 sudo sysctl kernel.hostname		- Оtображает значения отдельных параметров ядра
 sudo sysctl -р				- Загружает параметры из файла /etc/sysctl.conf
 sudo sysctl -w kernel.hostname=joe 	- Устанавливает значение kernel.hostname

 ==== Запись устройств по машинному адресу

 lspci			- Отображает список устройств PCI
 lspci -v		- Отображает список устройств PCI (более подробно)
 lspci -vv		- Отображает список устройств PCI (еще более подробно)

	dmidecode	- можно отображать информацию об устройствах компьютера,
			  включая информацию о поддерживаемых функциях BIOS

 sudo dmidecode | less	- Отображает список устройств
 sudo dmidecode 2.7

	hdparm		- Для просмотра и изменения информации о жестком диске 

 sudo hdparm /dev/sda	- Отображает параметры жестких дисков (SATA или SCSI)
 sudo hdparm /dev/hda	- Отображает параметры жесткого диска (IDE)
 sudo hdparm -I /dev/sda- Выводит подробную информацию о жестком диске

==================================================================================================
==== Управление сетевыми подключениями ===========================================================

 ---- Настройка сетей с помощью GUI

 sudo lshw -C network	- Она позволяет посмотреть подключенные сетевые устройства.

 sudo ethtool ethO	- Отображает параметры NIC интерфейса ethO
 
 sudo ethtool -i ethO
	-i		- Выводит информацию о драйвере NIC
	-S		- Отображает статистицу NIC интерфейса ethO
|-----------
 	Для отключения автоматического согласования и фиксирования скорости NIC, 
 равной 100 Мбит/сек при полном дуплексе, необходимо выполнить следующую команду:
 
 sudo ethtool -s ethO speed 100 duplex full autoneg off 	- Изменяет настройки NIC

	Для отключения же автоматического согласования и фиксирования скорости, 
 равной 10 Мбит/сек при полудуплексе, необходимо выполнить следующую команду:
 
 sudo ethtool -s ethO speed 10 duplex half autoneg off 		- Изменяет настройки NIC

	Эти изменения после перезагрузки сбрасываются
|-----------

 	netstat 	- отобразить статистику сете­вого интерфейса

 netstat -ic		- Обновляет статистику сетевого интерфейса ежесекундно
 watch netstat -i	- Обновляет статистику сети ( в режиме, ориентированном на экран )

 ---- Управление подключениями к сети

 для запуска или остановки сетевых интерфейсов можно использовать команды из /etc/init.d
 для определения автоматически загружаемой сети - из update-rc.d

 ---- Заnуск и остановка Еthеrnеt-подкпючений
 |-
 Карты NIC устанавливаются посредством редак­тирования файла /etc/network//interfaces
 |-

 sudo /etc/init.d/networking restart	- Остановка и запуск сетевых интерфейсов

 ifconfig		- Проверка состояния сетевых интерфейсов
 sudo ifdown ethO 	- Отключить сетевой интерфейс ethO
 sudo ifup ethO		- Включить сетевой интерфейс ethO

 ifconfig ethO 		- отображает информацию об адресе и статусе Еthеrnеt-интерфейса ethO
 ifconfig -а 		- Для получения информации об активных и неактивных сетевых картах

	iр		- для отображения инфор­мации о сетевых интерфейсах. 
			  Кроме того, она позволяет изменить настройки се­тевых устройств,
			  маршрутизации и IР-туннелей
 ip addr show ethO	- для отображения информации об интерфейсе ethO
 iр а			- получении информации обо всех интерфейсах

 ip help		- Просмотр информации об использовании ip
 iр addr help		- Просмотр помощи по объекту addr
 ip route help		- Просмотр помощи по объекту route
 ip tunnel help		- Просмотр помощи по объекту tunnel

 ipcalc -Ьn 192.168.1.100/27	-| для расчета маски подсети хост-компьютера с помощью его
				 | CIDR IР-адреса 
				 | CIDR - маршрутизация между доменами без разделения на классы

 ---- Беспроводные соединения

 lspci | grep -i wireless		- Поиск беспроводных РСI-карт
 iwconfig				- сканировать сетевые интерфейсы на наличие поддерживаемых
					  беспроводных сетевых карт
 sudo iwconfig wlanO essid "MYWireless"	- Присвоить essid значение MyWireless
 sudo iwconfig wlanO channel 3		- Установить канал 3
 sudo iwconfig wlanO mode Ad-Hoc	- Сменить режим Managed на режин Ad-Hoc
 sudo iwconfig wlanO ар any		- Использовать любую доступную точку доступа
 sudo iwconfig wlanO sens -50		- Установить чувствительность - 50
 sudo iwconfig wlanO retry 20		- Установить значение 20 для повторной передачи MAC
 
 sudo iwconfig wlanO key 1234-5555-66	- Установить ключ кодирования 1234-5555-66

 ------------
 Порты:
 СОМ1 (/dev/ttySO), СОМ2 (/dev/ttyS1), СОМЗ (/dev/ttyS2) и СОМ4 (/dev/ttyS3)

 sudo setserial -g /dev/ttyS0 /dev/ttyS1 /dev/ttyS2 /dev/ttyS3	- Отобразить информацию о порте
		-a 			- Отобразить детальную информацию о порте

 	minicom		- обращаться напрямую к модему или другому последовательному устройству
	-s		- для входа в режим настройки
 minicom -s		- Создание настроек для вашего модема
 ---------------

 ---- Установка разрешения имен

 /etc/resolv.conf	

 dig www.turbosphere.com		- Поиск по DNS-cepвepaм, указанным в /etc/resolv.conf
 dig www.turbosphere.com @4.2.2.1	- проводит опрос DNS-cepвepa по адресу 4.2.2.1.
 dig turbosphere.com mx			- Запрос о6 устройстве работы с электронной почтой
 dig turbosphere.com ns			- Запрос о низкоуровневых серверах имен
 dig +trace www.turЬosphere.com		- Рекурсивное отслеживание DNS-cepвepoв
 dig +short www.turbosphere.com		- Отображает только пару имя/IР-адрес
 dig -х 66.113.99.70 			- Получение информации о DNS по IР-адресу
 host 66.113.99.70			- для обратного DNS-зaпpoca
 hostname				- Просмотр полного DNS-имени локального компьютера
 sudo hostname server1.example.com	- Установить локальное имя хоста
 /etc/hostname 				- локальное имя хоста

 ---- Устранение неполадок в работе сети
	1. проверить, что все физические компоненты сети правильно подключены и находятся в рабочем состоянии
	2. проверьте, что соединения между физическими-узлами работают
	3. проверить соединение с определенным хостом

 ---- ---- Проверка соединения с элементом сети
	Если вы знаете, что соединение есть и отсутствует дуплексное рассогласование, то следующим шагом должна
	быть посылка запросов установленному по умолчанию шлюзу:

 /etc/network/interfaces	- шлюз

 ip route			- узнать, какой ШЛЮЗ используется по умолчанию
	default via 10.0.0. 1 dev ethO

 ping 10.0.0.1 			- убедиться в наличии IР-соединения с этим шлюзом
 ping -а 10.0.0.1		- Добавить звуковой эффект по мере пингования
 ping -с 4 10.0.0.1		- Пропинговать 4 раза и выйти ( используется по умолчанию в Windows )
 ping -q -с 5 10.0.0.1		- Отобразить сводку работы программы ping ( работает лучше с nараметром - с )
 sudo ping -f 10.0.0.1		- Посылать большое количество пакетов ( флудить )
 ping -i 3 10.0.0.1		- Отправлять пакеты с 3-секундным интервалом
 sudo ping -I ethO 10.0.0.1 	- Сменить источник на ethO ( применяется при наличии нескольких сетевых карт )

 sudo ping -I 10.0.0.155 10.0.0.1 	- Сменить источник на 10.0.0.155
 ping -s 1500 10.0.0.1			- Установить размер пакетов 1500 байт

 ---- ---- Проверка протокола разрешения адресов
	Если вы не можете получить ответ шлюза на пинг, то могут быть проблемы на МАС-уровне сети Ethernet:

 arp -v			- Отобразить записи в кэше ARP по имени
 arp -vn		- Отобразить записи в кэше ARP по IР -адресу
 sudo arp -d 10.0.0.50	- Удалить адрес 10.0.0.50 из кэша ARP

 sudo arp -s 10.0.0.51 ОО:ОВ:бА:О2:ЕС:95	- Добавить IP- и MAС-адреса в ARP

 	Использование ip вместо arp
 iр neighbor
 ip nei del 10.0.0.50 dev ethO
 iр n add 10.0.0.51 lladdr 00:08:6А:О2:ЕС:95 dev ethO

 
 arping 10.0.0.50	- Опросить подсеть, чтобы установить, используется ли адрес 10.0.0.50

 sudo arping -I ethO 10.0.0.50		- Установить опрашиваемый интерфейс 

 arping -f 10.0.0.50	- Опросить 10.0.0.50 и остановиться после получения первого ответа
 arping -c 2 10.0.0.51	- Опросить 10.0.0.50 и остановиться после двух раз

 ---- ---- Отслеживание маршрутов к хостам

 traceroute boost.turbosphere.com 		- Следовать маршруту к опреленному хост-компьютеру
 traceroute -I boost.turbosphere.com		- Использование IСМР-пакетов для отслеживания маршрутов
 traceroute -р 25 boost.turbosphere.com 	- Проводить отслеживание через порт 25
 traceroute -n boost.turЬosphere.com		- Отключить разрешение имен при отслеживании

	tracepath - альтернатива traceroute
 tracepath boost.turbosphere.com		- Использовать UDP для отспеживания маршрутов 

 route						- Отобразить информацию о локальной таблице маршрутизации
 route - n					- Отобразить таблицу маршрутизации без DNS-преобразований

 sudo route add default gw 10.0.0.2		- Установить 10.0.0.2 как шлюз, используемый по умолчанию

 sudo route add -net 192.168.0.0 netmask 255.255.255.0 ethO		-| добавить новый маршрут в вашу сеть, 
 sudo route add -net 192.168.0.0 netmask 255.255.255.0 gw 10.0.0.100	 | выбрав интерфейс (ethO) или
									 | IР-адрес шлюза (gw 10.О.О.100)
 sudo route del -net 192.168.0.0 netmask 255.255.255.0			- Удалить маршрут

 ip route show		-| Показать основную информацию о маршрутизации 
 ip route		 |
 ip r			 |

 sudo ip r add 192.168.0.0/24 via 10.0.0.100 dev ethO		- Добавить маршрут в интерфейс
 sudo iр r add 192.168.0.0/24 via 10.0.0.100			- Добавить маршрут без использования интерфейса
 sudo ip r del 192.168.0.0/24 					- Удалить маршрут

	Cделать новый маршрут постоным, отредактируйте файл /etc/network/interfaces
 	К примеру, чтобы добавить маршрут, добавленный выше с помощью команды iр, поместите в этот
	файл следующие данные:

 	iface ethO inet static
	address 192.168.0.0
	netmask 255.255.255.0
	gateway 10.0.0.100

 ---- ---- Просмотр соединений и статистики

 netstat - s | less		- Показать сводку действий ТСР, ICMP и UDP
 sudo netstat -tanp 		- Просмотреть активные ТCР-подключения
 sudo netstat -uanp 		- Просмотреть активные UDР-подключения
	listen - поможет ограничить выводимые посредством команды пetstat результаtы до информации о демонах,
		 связанных с портом ТСР
 sudo netstat -tanp | grep -i listen	- Просмотр демонов, проcлушивающих порт

 ---- ----
 sudo tcpdump | grep -v ssh	 	- поиск пакетов, исключая пакеты, связанные с ssh

==================================================================================================
==== Подключение к сетевым ресурсам ==============================================================

 ------	 elinks 			- Для использования браузером командной строки 

 elinks				- Запрашивает имя файла или URL
 elinks www.handsonhistory.com	- Открывает запрошенный файл или URL

 ------	wget			- позволяет скачивать файлы с FTP- и веб-серверов ( НТТР и HTTPS)
 	wget https://help.ubuntu.com/7.04/common/img/headerlogo.png

 	    alex:1234
 wget ftp://user:password@ftp.example.com/path/to/file			-| Если FТР-сервер требует
 или	    alex	     1234					 | имя пользователя
 wget --user=user --password=password ftp://ftp.example.com/path/to/file | и пароль

 wget http://www.wiley.com		- Закачать только веб-страницу
 wget -р http://www.wiley.com		- Закачать веб-страницу и другие элементы
      -pk 				- Закачать страницы с использованием локальных имен файлов
      -pkK				- Переименовать в локальные имена, сохранять исходные файлы
      -Е				- Присоединить .html к названиям загруженных файлов
      -m				- полностью копирует файлы и директории всей файловой
					  структуры сервера и, поми­мо этого, отмечает время и 
					  сохраняет перечни файлов FТР-каталога
      -mEkK				- создает наиболее практнчную копию сайта
      -с				- Продолжить закачку с того места, на котором она была прервана

 ------	curl 				- для однократных передач файлов

 curl -O ftp://kernelorg.mirrors.tds. net/puЬ/linux/kerne1/vl.O/patch[6-8].sign		- для установки
											  диапазона [6-8]
 curl -OO ftp://kernelorg.mirrors.tds.net/puЬ/linux/kernel/v2.6/ChangeLog-2.6.{1,4}	- для задания списка
											  {1,4} 
 curl -O ftp://chris:MyPasswd@ftp.example.com/home/chris/fileA -Q '-DELE fileA'		-| ввести имя 
											 | пользователя и 
	| пароль ( chris:MyPasswd ), скачать файл (fileA) с сервера, 
	| а затем удалить его, как только завершится загрузка ( -Q '- DELE filеА' )

 curl - Т install.log ftp://chris:MyPasswd@ftp.example.com/tmp/ \	-| загрузить (-Т) файл install.log на
	-Q "-RNFR install.log" -Q "-RNTO Xinstall.log			 | FТР-сервер. Затем удаленный файл
									 | переименовывается в Xinstall.log
 
 curl ftp://ftp.kernel.org/puЬ//					- Отобразить содержимое /pub/

 ------	ftp || lftp

 lftp mirrors.kernel.org			- Анонимное подключение
 lftp francois@example.com			-| Подключение с проверкой подлинности
 lftp -u francois example.com			 |



 lftp -u francois,Mypwd example.com		- Проверка подлинности с помощью пароля
						  ! Пароли, вводимые в командной стро­ке, заnисываются и
						  ! хранятся как обычный текст в файле ~/.bash_history 
 lftp						- Запустить lftp без установки подключения
	 lftp :~> open mirrors.kernel.org	- Установить подключение в рамках сессии lftp

 lftp mirrors.kernel.org: ~>   
	~> pwd					- Проверить текущую директорию
	~> ls					- Отобразить текущую директорию
	~> cd fedora/releases/7/Live/i386 	- Сменить папку
	~> get Fedora-7-Live-i686.iso		- Скачать файл
	   <Ctrl+Z>				- Переключить загрузку в фоновый режим
	~> mget /gnu/ed/*			- Скачать все файлы из /gnu/ed
	~> !ls					- Локальный запуск ls
	~> bookmark add Live			- Создать закладку
	~> quit					- Закрыть lftp
 	~> lcd /home/chris/songs		- Перейти к локальной папке
	~> mkdir songs				- Создать директорию на сервере
	~> chmod 700 songs			- Изменить права удаленной папки
	~> put song.oggtune.ogg 		- Загрузить файлы на сервер
	~> mput /var/songs/*			- Загрузить соответствующие условиям файлы

 lftpget			- сценарий командного процессора для неинтерактивных сессий
 lftpget ftp://mirrors.kernel.org/ubuntu/dists/feisty/Release

 ---- Использование инcnрументов SSH для передачи файлов

 	scp	- обеспечит вас всем необходимым для передачи файла с одного компьютера на другой, 
		  в то время как она будет безопасно зашифрована на этапе авторизации
		  и самого процесса передачи

 scp myfile francois@server1:/tmp/			- Скопировать myfilе на server1
 scp server1:/tmp/myfile				- Скопировать myfile, находящийся на другом узле,
							  в текvщую локальную папку
 scp -р myfile server1:/tmp/				- -р: для сохранения прав доступа и временных меток
							      на копируемых файлах
 scp -Р 12345 myfile server1:/tmp/			- Подключиться через определенный порт
 scp -r mydir francois@server1:/tmp/			- Копирует все папки mydir в удаленную папкv ltmp
							  -r: Для создания рекурсивных копий с определенного
							      места в удаленной файло­вой системе
 ----  sftp lftp		[2:263] 
 ---- Утилиты для передачи файлов в Windows	[2:264]

 WinSCP
 FileZilla
 PSCP
 PSFTP 

 ---- Предоставление общего доступа к удаленным директориям
 
 ---- ---- NFS	[2:265]
 ---- ---- Samba [2:266]
 smb.conf			~ файл конфигурации
 testparm			- Проверка конфигурации
 testparm -v | less		- просмотр параметров по умолчанию
 
 samba	(как у меня заработало)	[soft linux/samba.txt]

 ---- ---- sshfs [2:270]
	 
==================================================================================================
==== Безопасность ~;brb/Z ================================================================================
 useradd		- добавления новых пользователей
	-D		- просмотр параметров
 sudo useradd -m willz	- добавление нового пользователя
 				  -m: необходимо создать домашний каталог /home/willz
				      и копию набора файлов конфигурации (каждый из них начинается с точки (.))
 sudo passwd willz		- Устанавливает пароль учетной записи

 sudo useradd -u 1101 -g 1300 skolmes	- Использовать заданный UID (идентификатор пользователя )
					  и GID (идентификатор групnы) для пользователя
 sudo useradd -m -d /home/jj jones	- Создать корневой каталог /var/x/jj
 sudo useradd -G support, sales timd	- Добавить пользователя в группы support и sales
 sudo useradd -с "Tom G. Lotto" tlot	- Добавить полное имя пользователя в поле комментария
 sudo useradd -s /bin/tcsh joeq		- Назначить новый интерпретатор команд, 
					  используемый по умолчанию (tcsh); вы должны его установить
 sudo useradd -е 2008-04-01 jerry	- Дата истечения срока действия учетной записи April 01.2008
 sudo useradd -f О jdoe			- Создать отключенную учетную запись
 sudo useradd -s /sbin/nologin billt	- Не позволять пользователю входить в систему
 sudo useradd billyq			- Предотвратить создание корневого каталога, отсутствие -m

 groups					- вывод группы текушего пользователя,
 groups francois			- Вывод списка групп, к которым принадлежит пользователь  
 sudo useradd -D -b /home2 -s /bin/csh	- Установить базовую директорию и интерпретатор команд,
					  используемый по умолчанию
 sudo useradd -D -е 2009-01-01		- Установить дату истечения срока действия всех учетных записей
					  как 2009-й год

 sudo usermod -с "Thomas Lotto" tlot	- Изменить имя пользователя в поле комментария
 sudo usermod -s /bin/sh joeq 		- Изменить интерпретатор команд, используемый по умолчанию на sh
 sudo usermod -L swanson		- Заблокировать учетную запись пользователя swanson
 sudo usermod -U travis			- Разблокировать учетную запись пользователя travis

 chsh -s /bin/sh			- Изменить текущий интерпретатор команд на /bin/sh
 sudo chsh -s /bin/sh francois		- Изменить интерпретатор команд на /bin/sh

 sudo chfn			\
	-o "B-205"		\	- Изменить номер офиса
	-h "212-555-1212" 	\	- Изменить домашний номер телефона
	-w "212-555-1957"		- Изменить офисный номер телефона
 finger francois


 userdel jimbo				- Удапить пользователя, но не его корневой каталог
 userdel -r lily			- Удапить пользователя, корневой каталог 
					  и спул-файпы электронной почты

 passwd					- Изменить личный пароль пользователя
 sudo passwd -l carl			- Блокировать учетную запись пользователя (carl)
 sudo passwd -u carl			- Разблокировать учетную запись пользователя (carl)
 sudo passwd -u jordan			- Неудачная попытка разблокировать учетную запись с пустым паролем

 sudo passwd -n 2 vern			- Установить минимальный срок действия пароля 2 дня
 sudo passwd -х 300 vern		- Установить максимальный срок действия пароля 300 дней
 sudo passwd -w 10 vern			- Оповещать о6 истечении срока действия пароля за 10 дней
 sudo passwd -i 14 vern			- Количество дней до отключения учетной записи 
					  после истечения срока действия пароля

 sudo chage -l vern 			- Показать информацию о дате истечения пароля
 sudo chage -I 40 frank			- Отключить учетную запись пользователя по прошествии 40 дней
 sudo chage -d 5 perry			- Срок действия пароля закончится через 5 дней

 sudo groupadd marketing		- Создать новую группу со следующим доступным GID
 sudo groupadd -g 1701 sales		- Создать новую груnпу с GID, равным 1701
 sudo groupadd -о -g 74 mysshd		- Создать груnпу с существующим GID

 sudo groupmod -g 491 myadmin		- Изменить GID группы myadmin на 491
 sudo groupmod -n mуаd myadmin		- Изменить имя группы myadmin на myad
 sudo groupdel myad 			- Удалить существующую группу myad

 last					- Вывести список недавних удачных входов в систему
 last -а				- Упрощает процесс чтения имени хост-компьютера удаленного клиента
 sudo lastb				- Вывести список недавних неудачных входов в систему
 who -u					- Вывести список всех пользователей в системе на данный момент
					  	(полный вариант)
 users					- 	(краткий вариант)

 id					- Ваша принадлежность (UID, GID 
					  и группа для текvщего интерпретатора команд)
 who am i				- Ваша принадлежность (пользователь, tty, 
					  дата входа в систему, местонахождение)
 finger -s chris			- Информация о пользователе (краткая)
 finger -l chris			- 			    (полная)


 su - cnegus		- переключать­ся на других пользователей
 			  Команда su также может быть использована дли выполнения отдельной коман­ды 
			  от лица конкретного пользователи:
			  $ su -с whoami
			    Password : ******
			    root
			  # su -с 'less /var/log/messages'
 whoami
 echo $USER
 id
 hostname
 who 
 w
 
==================================================================================================

==== Форматирование флешки ==============

 1. sudo fdisk -l
	Устр-во Загр     Начало       Конец       Блоки   Id  Система
	/dev/sdf1               1        1955    15641929    c  W95 FAT32 (LBA)
 2. sudo umount /dev/sdf1
 3. sudo mkdosfs -F 32 /dev/sdf1
	sdf1 заменить на то что будет ваше

=========================================
==== настройка yandex DNS ===============
sudo gedit /etc/resolv.conf 
---- 
nameserver 77.88.8.7
nameserver 77.88.8.3
nameserver 127.0.1.1
----
чем выше тем приоритетнее
первые 2 - яндекс DNS 

========================================
=== из hexlet == 

ls -lha 						вывести директорию в виде списка (подробного)
vim или nano 					редактор командной строки
touch {file} 					создать новый пустой файл
cp -R {original_name} {new_name} скопировать файл или директорию (и всё их содержимое)
mv {original_name} {new_name} 	переместить или переименовать файл
rm {file} 						удалить файл
rm -rf {file/folder} 			удалить файл или папку без возможности восстановления [использовать аккуратно!]
pwd 							вывести текущую рабочую директорию
cat, less,tail,head -n10 {file} вывести в STDOUT содержимое файла
grep -inr {string} 				найти строку в любом файле этой директории или дочерних директориях
column -s, -t <delimited_file> 	отобразить разделенный запятыми файл в виде столбцов

ssh {username}@{hostname} 		соединиться с удалённой машиной

tree -LhaC 3 					показать структуру директории на 3 уровнями вглубь (с размерами файлов и включая скрытые директории)

htop (или top) 					диспетчер задач

pip install --user {pip_package} пакетный менеджер Python для установки пакетов в ~/.local/bin

pushd . ; popd ; dirs; cd - push/pop/view директорию в стек + изменить обратно на последнюю директорию

sed -i "s/{find}/{replace}/g" {file} заменить строку в файле

find . -type f -name '*.txt' -exec sed -i "s/{find}/{replace}/g" {} \; 
	заменить строку для каждого файла в этой и дочерней папках с именем типа *.txt

tmux new -s session, tmux attach -t session 			создать новую сессию терминала без создания нового окна [продвинутый уровень]
wget {link} 											загрузить веб-страницу или веб-ресурс
curl -X POST -d "{key: value}" http://www.google.com 	отправить HTTP-запрос на веб-сервер
find <directory> 										вывести список всего содержимого директории и её дочерних директорий рекурсивно

lsof -i :8080 					вывести список дескрипторов открытых файлов (-i — флаг для сетевых интерфейсов)
netstat | head -n20 			вывести список открытых интернет/UNIX сокетов и связанной с ними информации
dstat -a 						транслировать текущий диск, сеть, активность CPU и другое
nslookup <IP address> 			найти hostname для удалённого IP-адреса
strace -f -e <syscall> <cmd> 	отследить системные вызовы программы (-e — флаг для фильтрования конкретных системных вызовов)
ps aux | head -n20 				вывести текущие активные процессы
file <file> 					проверить тип файла (например исполняемый, бинарный, текстовый файл с кодировкой ASCII)
uname -a 						информация о ядре ОС
lsb_release -a 					информация об ОС
hostname 						проверить hostname текущего компьютера (например, название, чтобы другие компьютеры могли иметь доступ к вашему)
pstree 							визуализировать форки процессов
time <cmd> 						исполнить команду и составить статистику о том, сколько времени потребовалось на исполнение
CTRL + z ; bg; jobs; fg 		отправить процесс в текущий tty в background и обратно на передний план
cat file.txt | xargs -n1 | sort | uniq -c посчитать количество уникальных слов в файле
wc -l <file> 					количество строк в файле
du -ha 							показать размер на диске для директорий и их содержимого
zcat <file.gz> 					вывести содержимое заархивированного текстового файла
scp <user@remote_host> <local_path> скопировать файл с удалённого на локальный сервер или наоборот
man {command} показать инструкцию, (т.е. документацию) для команды (но скорее всего легче использовать Google)
=================
==== from mail.ru ====
 su username 	- действовать от имени другого пользователя

 adduser
 addgroup

chown username filename
chgrp groupname filename

chmod [u,g,o][+,-][r,w,x] filename

shebang line "#!/usr/local/bin/python" на "#!/usr/bin/env python"

-- процессы --
 pstree
 top
 ps

 kill pid
 nohup ... &

 ls /var/run/
 cat /var/run/ngnix.pid

-- окружение, переменные окружения --
 env
 set VARNAME=value
 export VARNAME=value
 unset VARNAME

-- --
telnet	- создать соединение, дебажить
netcat	- создать соединение, дебажить
mcedit
watch
screen
screen -r tv360
======================
==== Литература: 

 2: Кристофер Негус, Франсуа Каэн -
    Ubuntu и Deblan Linux для продвинутых: более 1000 неэаменимых команд

